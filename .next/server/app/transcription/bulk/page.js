(()=>{var e={};e.id=6756,e.ids=[6756],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},60233:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(79858),s(98131),s(35866);var t=s(23191),i=s(88716),r=s(37922),n=s.n(r),l=s(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(a,d);let o=["",{children:["transcription",{children:["bulk",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,79858)),"/Users/Aaron/Downloads/next-lipsync-app/app/transcription/bulk/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,98131)),"/Users/Aaron/Downloads/next-lipsync-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/Aaron/Downloads/next-lipsync-app/app/transcription/bulk/page.tsx"],p="/transcription/bulk/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/transcription/bulk/page",pathname:"/transcription/bulk",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},97017:(e,a,s)=>{Promise.resolve().then(s.bind(s,20945))},82537:(e,a,s)=>{Promise.resolve().then(s.bind(s,53055))},9922:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},53055:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>n});var t=s(10326);s(4047);var i=s(17577),r=s(25472);function n(){let[e,a]=(0,i.useState)([]),[s,n]=(0,i.useState)([]),[l,d]=(0,i.useState)("en"),[o,c]=(0,i.useState)(""),[p,u]=(0,i.useState)(0),[m,h]=(0,i.useState)(3),[x,g]=(0,i.useState)(!1),f=(0,i.useRef)([]),b=(0,i.useCallback)(()=>{n([]),a([])},[]),v=(0,i.useCallback)(e=>{if(!e)return;let s=Array.from(e);a(s),n(s.map((e,a)=>({id:`${Date.now()}-${a}-${e.name}`,file:e,status:"queued"})))},[]),j=(0,i.useCallback)(async e=>{let a=new FormData;a.append("file",e),a.append("filename",e.name);let s=await fetch("/api/upload",{method:"POST",body:a});if(!s.ok)throw Error(await s.text());return(await s.json()).url},[]),y=(0,i.useCallback)(async e=>{let{data:{user:a}}=await r._.auth.getUser();if(!a)throw Error("Please sign in at /auth before creating tasks.");n(a=>a.map(a=>a.id===e.id?{...a,status:"uploading",error:null}:a));let s=await j(e.file);n(a=>a.map(a=>a.id===e.id?{...a,status:"running",audioUrl:s}:a));let t={language:l||void 0,prompt:o||void 0,temperature:p,audio_file:s},{data:i,error:d}=await r._.from("tasks").insert({user_id:a.id,type:"lipsync",status:"queued",provider:"replicate",model_id:"openai/gpt-4o-transcribe",options_json:t,audio_url:s,text_input:o||null}).select("*").single();if(d||!i)throw Error(d?.message||"Failed to create task");let c=await fetch("/api/transcription/run",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!c.ok)throw Error(await c.text());let u=(await c.json()).text||"";await r._.from("tasks").update({status:"finished"}).eq("id",i.id),n(a=>a.map(a=>a.id===e.id?{...a,status:"finished",transcript:u,taskId:i.id}:a))},[l,o,p,j]),w=(0,i.useCallback)(e=>{let a=new Blob([e.transcript||""],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(a),t=document.createElement("a");t.href=s,t.download=(e.file.name.replace(/\.[^.]+$/,"")||"transcript")+".txt",document.body.appendChild(t),t.click(),t.remove(),URL.revokeObjectURL(s)},[]),N=(0,i.useCallback)(async()=>{if(x||0===s.length)return;g(!0),f.current=s.map(e=>({...e}));let e=[],a=async()=>{let e=f.current.find(e=>"queued"===e.status);if(e){e.status="uploading";try{await y(e)}catch(a){n(s=>s.map(s=>s.id===e.id?{...s,status:"error",error:a?.message||"Error"}:s))}finally{await a()}}},t=Math.max(1,Math.min(10,Math.floor(m)));for(let s=0;s<t;s++)e.push(a());await Promise.all(e),g(!1)},[s,m,x,y]),k=(0,i.useMemo)(()=>s.filter(e=>"finished"===e.status).length,[s]),P=(0,i.useCallback)(()=>{let e=s.filter(e=>"finished"===e.status&&""!==(e.transcript||"").trim());if(0===e.length)return;let a=new Blob([e.map((e,a)=>{let s=`=== ${a+1}. ${e.file.name} ===`;return`${s}
${e.transcript}
`}).join("\n")],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(a),i=document.createElement("a");i.href=t,i.download=`transcripts_${new Date().toISOString().replace(/[:.]/g,"-")}.txt`,document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(t)},[s]);return(0,t.jsxs)("div",{className:"container",children:[(0,t.jsxs)("div",{className:"panel",children:[(0,t.jsxs)("div",{className:"header",children:[t.jsx("h3",{style:{margin:0},children:"Bulk Transcription"}),(0,t.jsxs)("span",{className:"badge",children:[k,"/",s.length," done"]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"small",children:"Select up to 20 audio/video files"}),t.jsx("input",{type:"file",multiple:!0,accept:"audio/*,video/mp4,video/webm",onChange:e=>v(e.target.files)})]}),(0,t.jsxs)("div",{className:"options",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"small",children:"Language"}),t.jsx("input",{className:"input",value:l,onChange:e=>d(e.target.value)})]}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"small",children:"Temperature"}),t.jsx("input",{className:"input",type:"number",step:.1,min:0,max:1,value:p,onChange:e=>u(parseFloat(e.target.value))})]})]})]}),(0,t.jsxs)("div",{style:{marginTop:12},children:[t.jsx("div",{className:"small",children:"Prompt (optional)"}),t.jsx("textarea",{className:"input",rows:3,value:o,onChange:e=>c(e.target.value),placeholder:"Style guide or context"})]}),(0,t.jsxs)("div",{className:"row",style:{marginTop:12},children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"small",children:"Concurrency"}),t.jsx("input",{className:"input",type:"number",min:1,max:10,value:m,onChange:e=>h(parseInt(e.target.value||"1"))})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"end",gap:8},children:[t.jsx("button",{className:"btn",disabled:0===e.length||x,onClick:N,children:x?"Running…":"Run all"}),t.jsx("button",{className:"btn",disabled:x,onClick:b,children:"Reset"}),t.jsx("button",{className:"btn",disabled:0===k,onClick:P,children:"Download all (.txt)"})]})]})]}),(0,t.jsxs)("div",{className:"panel",style:{marginTop:12},children:[(0,t.jsxs)("div",{className:"header",children:[t.jsx("h3",{style:{margin:0},children:"Queue"}),(0,t.jsxs)("span",{className:"badge",children:[s.length," files"]})]}),t.jsx("div",{style:{display:"grid",gap:10},children:s.map(e=>(0,t.jsxs)("div",{className:"panel",style:{padding:10},children:[(0,t.jsxs)("div",{className:"row",style:{marginBottom:6},children:[t.jsx("div",{style:{fontWeight:700,overflow:"hidden",textOverflow:"ellipsis"},children:e.file.name}),t.jsx("span",{className:"badge",children:e.status})]}),e.transcript?t.jsx("div",{className:"small",style:{whiteSpace:"pre-wrap",maxHeight:160,overflow:"auto"},children:e.transcript}):e.error?t.jsx("div",{className:"small",style:{color:"#ff7878"},children:e.error}):t.jsx("div",{className:"small",style:{opacity:.8},children:"Awaiting result…"}),(0,t.jsxs)("div",{className:"row",style:{marginTop:6},children:[t.jsx("div",{className:"small",style:{opacity:.8},children:e.audioUrl?t.jsx("a",{href:e.audioUrl,target:"_blank",rel:"noreferrer",children:"audio"}):"no audio yet"}),t.jsx("div",{style:{display:"flex",gap:8},children:t.jsx("button",{className:"btn",disabled:!e.transcript,onClick:()=>w(e),children:"Download .txt"})})]})]},e.id))})]})]})}},20945:(e,a,s)=>{"use strict";s.d(a,{LayoutWrapper:()=>k});var t=s(10326);s(17577);var i=s(35047),r=s(29798),n=s(58775),l=s(36283),d=s(49758),o=s(71709),c=s(1572),p=s(56562),u=s(61584),m=s(87444),h=s(31540),x=s(88307),g=s(2634),f=s(71208),b=s(88319),v=s(66697),j=s(32691),y=s(88378);let w=[{href:"/",label:"Home",icon:t.jsx(r.Z,{size:18})},{href:"/lipsync-new",label:"+ New Lipsync",icon:t.jsx(n.Z,{size:18}),gradient:"linear-gradient(90deg, #6aa4ff, #ff9f43)"},{href:"/transcription/bulk",label:"+ Bulk Transcription",icon:t.jsx(l.Z,{size:18}),gradient:"linear-gradient(90deg, #ff9f43, #6aa4ff)"},{href:"/veo",label:"+ New Video",icon:t.jsx(d.Z,{size:18}),gradient:"linear-gradient(90deg, #a36bff, #6aa4ff)"},{href:"/image",label:"+ New Image",icon:t.jsx(o.Z,{size:18}),gradient:"linear-gradient(90deg, #42d392, #a36bff)"},{href:"/enhance",label:"+ New Enhance",icon:t.jsx(c.Z,{size:18}),gradient:"linear-gradient(90deg, #ffbd2e, #42d392)"},{href:"/tts",label:"+ New Text to Speech",icon:t.jsx(p.Z,{size:18}),gradient:"linear-gradient(90deg, #ffbd2e, #ff6b6b)"},{href:"/adscript",label:"+ New Ad Script",icon:t.jsx(u.Z,{size:18}),gradient:"linear-gradient(90deg, #6aa4ff, #ff9f43)"},{href:"/background-remove",label:"+ Remove Background",icon:t.jsx(m.Z,{size:18}),gradient:"linear-gradient(90deg, #42d392, #ff6b6b)"},{href:"/download",label:"+ TikTok Downloader",icon:t.jsx(h.Z,{size:18}),gradient:"linear-gradient(90deg, #1db954, #2b8a3e)"},{href:"/spy",label:"Spy Tool",icon:t.jsx(x.Z,{size:18}),gradient:"linear-gradient(90deg, #6aa4ff, #42d392)"},{href:"/editor",label:"Editor",icon:t.jsx(g.Z,{size:18}),gradient:"linear-gradient(90deg, #42d392, #a36bff)"},{href:"/auto-edit-beta",label:"+ Auto Edit Beta",icon:t.jsx(f.Z,{size:18}),gradient:"linear-gradient(90deg, #6aa4ff, #a36bff)"},{href:"/library",label:"Database",icon:t.jsx(b.Z,{size:18}),gradient:"linear-gradient(90deg, #1db954, #6aa4ff)"},{href:"/tasks",label:"Tasks",icon:t.jsx(v.Z,{size:18})},{href:"/auth",label:"Sign in / Up",icon:t.jsx(j.Z,{size:18})},{href:"#",label:"Settings (soon)",icon:t.jsx(y.Z,{size:18}),disabled:!0}];function N(){let e=(0,i.usePathname)();return(0,t.jsxs)("aside",{className:"sidebar",children:[t.jsx("div",{className:"sidebar-header",children:t.jsx("h1",{className:"sidebar-title",children:"Lipsync"})}),t.jsx("nav",{className:"sidebar-nav",children:w.map(a=>{let s=e===a.href,i=!!a.gradient;return(0,t.jsxs)("a",{href:a.href,className:`nav-item ${s?"nav-item-active":""} ${i?"nav-item-gradient":""} ${a.disabled?"nav-item-disabled":""}`,style:i?{background:a.gradient}:void 0,onClick:a.disabled?e=>e.preventDefault():void 0,title:a.label,children:[t.jsx("span",{className:"nav-item-icon",children:a.icon}),t.jsx("span",{className:"nav-item-label",children:a.label})]},a.href)})}),t.jsx("div",{className:"sidebar-footer",children:(0,t.jsxs)("div",{className:"sidebar-copyright",children:["\xa9 ",new Date().getFullYear()," Lipsync"]})})]})}function k({children:e}){return"/"===(0,i.usePathname)()?t.jsx(t.Fragment,{children:e}):(0,t.jsxs)("div",{className:"app-layout",children:[t.jsx(N,{}),(0,t.jsxs)("main",{className:"app-main",children:[t.jsx("div",{className:"app-header",children:(0,t.jsxs)("div",{className:"app-header-content",children:[t.jsx("div",{className:"app-tagline",children:"Build great lipsyncs."}),(0,t.jsxs)("div",{className:"app-user",children:[t.jsx("div",{className:"user-email",id:"user-email"}),t.jsx("div",{className:"user-avatar-small"})]})]})}),t.jsx("div",{className:"app-content",children:e})]})]})}},25472:(e,a,s)=>{"use strict";s.d(a,{_:()=>t});let t=(0,s(47939).eI)("https://ueunqeqrvtuofpdoozye.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVldW5xZXFydnR1b2ZwZG9venllIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxOTM4NjMsImV4cCI6MjA3MTc2OTg2M30.JY5i-uB5vZJ6enhWVgf9Bwg9bK2BFjmuXuOfjbQEQUw",{auth:{persistSession:!0,autoRefreshToken:!0}})},98131:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c,metadata:()=>o});var t=s(19510);s(67272);var i=s(68570);let r=(0,i.createProxy)(String.raw`/Users/Aaron/Downloads/next-lipsync-app/components/LayoutWrapper.tsx`),{__esModule:n,$$typeof:l}=r;r.default;let d=(0,i.createProxy)(String.raw`/Users/Aaron/Downloads/next-lipsync-app/components/LayoutWrapper.tsx#LayoutWrapper`),o={title:"Lipsync App",description:"Upload a video + audio and get back a lipsynced video using Sieve",viewport:"width=device-width, initial-scale=1"};function c({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{suppressHydrationWarning:!0,children:t.jsx(d,{children:e})})})}},79858:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});var t=s(68570);let i=(0,t.createProxy)(String.raw`/Users/Aaron/Downloads/next-lipsync-app/app/transcription/bulk/page.tsx`),{__esModule:r,$$typeof:n}=i;i.default;let l=(0,t.createProxy)(String.raw`/Users/Aaron/Downloads/next-lipsync-app/app/transcription/bulk/page.tsx#default`)},67272:()=>{},4047:()=>{}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[8948,7893,7939],()=>s(60233));module.exports=t})();
(()=>{var e={};e.id=6040,e.ids=[6040],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},76217:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>o}),t(29666),t(98131),t(35866);var r=t(23191),s=t(88716),i=t(37922),n=t.n(i),l=t(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(a,d);let o=["",{children:["download",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,29666)),"/Users/Aaron/Downloads/next-lipsync-app/app/download/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,98131)),"/Users/Aaron/Downloads/next-lipsync-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/Aaron/Downloads/next-lipsync-app/app/download/page.tsx"],p="/download/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/download/page",pathname:"/download",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},65039:(e,a,t)=>{Promise.resolve().then(t.bind(t,61878))},97017:(e,a,t)=>{Promise.resolve().then(t.bind(t,20945))},9922:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},61878:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var r=t(10326);t(4047);var s=t(17577),i=t(46226),n=t(43120),l=t(25472);function d(){let[e,a]=(0,s.useState)(""),[t,d]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),[p,u]=(0,s.useState)(null),[h,g]=(0,s.useState)(null),[x,f]=(0,s.useState)(null);function m({event:e,onActivate:a}){("Enter"===e.key||" "===e.key)&&a()}async function y(){d(!0),c(null),u(null);try{let{data:{user:a}}=await l._.auth.getUser();if(!a)throw Error("Please sign in at /auth before creating a task.");let{data:t,error:r}=await l._.from("tasks").insert({user_id:a.id,type:"download",status:"queued",provider:"tikwm",backend:"tikwm-downloader",text_input:e}).select("*").single();if(r||!t)throw Error(r?.message||"Failed to create task");f(t.id);let s=await fetch("/api/download/tiktok",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})});if(!s.ok)throw Error(await s.text());let i=await s.json();if(!i.url)throw Error("No media URL returned");g(i.url),u(`/api/proxy?type=video&url=${encodeURIComponent(i.url)}`),t?.id&&await l._.from("tasks").update({status:"finished",output_url:i.url}).eq("id",t.id)}catch(e){c(e instanceof Error?e.message:"Failed to download"),x&&await l._.from("tasks").update({status:"error"}).eq("id",x)}finally{d(!1)}}async function b(){d(!0),c(null),u(null);try{let{data:{user:a}}=await l._.auth.getUser();if(!a)throw Error("Please sign in at /auth before creating a task.");let{data:t,error:r}=await l._.from("tasks").insert({user_id:a.id,type:"download",status:"queued",provider:"yt-dlp",backend:"yt-dlp",text_input:e}).select("*").single();if(r||!t)throw Error(r?.message||"Failed to create task");f(t.id);let s=await fetch("/api/download/tiktok",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})});if(!s.ok)throw Error(await s.text());let i=await s.json();if(!i.url)throw Error("No media URL returned");g(i.url),u(`/api/proxy?type=video&url=${encodeURIComponent(i.url)}`),t?.id&&await l._.from("tasks").update({status:"succeeded",output_url:i.url}).eq("id",t.id)}catch(e){c(e instanceof Error?e.message:"Failed to download"),x&&await l._.from("tasks").update({status:"failed"}).eq("id",x)}finally{d(!1)}}let v=/\.(png|jpg|jpeg|gif|webp)(\?|$)/i.test(String(h||p||""));return(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"panel output",children:[r.jsx("div",{className:"header",children:r.jsx("h2",{style:{margin:0},children:"Output"})}),r.jsx("div",{className:"outputArea",children:p?v?(0,r.jsxs)(r.Fragment,{children:[r.jsx(i.default,{src:p,alt:"Downloaded image",width:1280,height:720,style:{maxWidth:"100%",height:"auto",borderRadius:8}}),r.jsx(n.Z,{mediaUrl:h||p,kind:"image"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("video",{controls:!0,preload:"metadata",playsInline:!0,style:{maxWidth:"100%",borderRadius:8},onError:()=>c("Failed to load video. Try the direct link below."),children:[r.jsx("source",{src:p,type:"video/mp4"}),h&&h!==p?r.jsx("source",{src:h}):null]}),(0,r.jsxs)("div",{className:"small",style:{marginTop:8},children:[r.jsx("a",{href:p,target:"_blank",rel:"noreferrer",children:"Open via proxy"}),h?(0,r.jsxs)(r.Fragment,{children:[" ","|"," ",r.jsx("a",{href:h,target:"_blank",rel:"noreferrer",children:"Open direct"})]}):null]}),r.jsx(n.Z,{mediaUrl:h||p,kind:"video"})]}):r.jsx("div",{style:{fontSize:16,color:"#b7c2df"},children:"Downloaded media will appear here."})}),o&&r.jsx("div",{className:"small",style:{color:"#ff7878"},children:o})]}),(0,r.jsxs)("div",{className:"panel",children:[r.jsx("div",{className:"header",children:r.jsx("h3",{style:{margin:0},children:"Inputs"})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"small",children:"Video URL (TikTok/TikTok Ads)"}),r.jsx("input",{className:"input",value:e,onChange:e=>a(e.target.value),placeholder:"https://..."})]}),r.jsx("button",{className:"btn",type:"button",style:{marginTop:12},disabled:!e.trim()||t,onClick:y,onKeyDown:e=>m({event:e,onActivate:y}),children:t?"Downloading…":"Download"}),r.jsx("button",{className:"btn",type:"button",style:{marginTop:12},disabled:!e.trim()||t,onClick:b,onKeyDown:e=>m({event:e,onActivate:b}),children:t?"Downloading…":"Download via Open Source (yt-dlp)"})]})]})}},43120:(e,a,t)=>{"use strict";t.d(a,{Z:()=>n});var r=t(10326),s=t(17577),i=t(25472);let n=function({mediaUrl:e,kind:a,context:t,size:n="default"}){let[l,d]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[p,u]=(0,s.useState)(null),[h,g]=(0,s.useState)("idle");async function x(){if(e){d(!0),u(null),c(!1);try{let{data:{user:r}}=await i._.auth.getUser();if(!r)throw Error("Please sign in at /auth to save assets.");let s=await i._.auth.getSession(),n=s.data.session?.access_token||"";g("pending");let l=await fetch("/api/assets/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:n?`Bearer ${n}`:""},body:JSON.stringify({url:e,kind:a,context:t})});if(!l.ok)throw Error(await l.text());c(!0),g("indexing");try{let e=await l.json(),a=e?.asset?.id;if(a){let e=setInterval(async()=>{try{let{data:t}=await i._.from("media_assets").select("status").eq("id",a).single(),r=t?.status||"pending";"ready"===r&&(g("ready"),clearInterval(e)),"error"===r&&(g("error"),clearInterval(e))}catch{}},2e3);setTimeout(()=>clearInterval(e),2e4)}else g("ready")}catch{g("ready")}}catch(e){u(e instanceof Error?e.message:"Failed to add to database")}finally{d(!1)}}}return(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:8},children:[r.jsx("button",{className:"btn",type:"button","aria-label":"Add this media to database",onClick:x,onKeyDown:e=>(function({event:e,onActivate:a}){("Enter"===e.key||" "===e.key)&&a()})({event:e,onActivate:x}),disabled:l,style:{padding:"large"===n?"12px 14px":"6px 10px",width:"large"===n?"100%":void 0,fontSize:"large"===n?16:void 0},children:l?"Saving to database…":o?"Saved ✓":"Save to database"}),"idle"!==h&&r.jsx("span",{className:"badge","aria-live":"polite",children:"pending"===h?"Pending":"indexing"===h?"Indexing":"ready"===h?"Ready":"error"===h?"Error":""}),p&&r.jsx("div",{className:"small",style:{color:"#ff7878"},children:p})]})}},20945:(e,a,t)=>{"use strict";t.d(a,{LayoutWrapper:()=>N});var r=t(10326);t(17577);var s=t(35047),i=t(29798),n=t(58775),l=t(36283),d=t(49758),o=t(71709),c=t(1572),p=t(56562),u=t(61584),h=t(87444),g=t(31540),x=t(88307),f=t(2634),m=t(71208),y=t(88319),b=t(66697),v=t(32691),w=t(88378);let j=[{href:"/",label:"Home",icon:r.jsx(i.Z,{size:18})},{href:"/lipsync-new",label:"+ New Lipsync",icon:r.jsx(n.Z,{size:18}),gradient:"linear-gradient(90deg, #6aa4ff, #ff9f43)"},{href:"/transcription/bulk",label:"+ Bulk Transcription",icon:r.jsx(l.Z,{size:18}),gradient:"linear-gradient(90deg, #ff9f43, #6aa4ff)"},{href:"/veo",label:"+ New Video",icon:r.jsx(d.Z,{size:18}),gradient:"linear-gradient(90deg, #a36bff, #6aa4ff)"},{href:"/image",label:"+ New Image",icon:r.jsx(o.Z,{size:18}),gradient:"linear-gradient(90deg, #42d392, #a36bff)"},{href:"/enhance",label:"+ New Enhance",icon:r.jsx(c.Z,{size:18}),gradient:"linear-gradient(90deg, #ffbd2e, #42d392)"},{href:"/tts",label:"+ New Text to Speech",icon:r.jsx(p.Z,{size:18}),gradient:"linear-gradient(90deg, #ffbd2e, #ff6b6b)"},{href:"/adscript",label:"+ New Ad Script",icon:r.jsx(u.Z,{size:18}),gradient:"linear-gradient(90deg, #6aa4ff, #ff9f43)"},{href:"/background-remove",label:"+ Remove Background",icon:r.jsx(h.Z,{size:18}),gradient:"linear-gradient(90deg, #42d392, #ff6b6b)"},{href:"/download",label:"+ TikTok Downloader",icon:r.jsx(g.Z,{size:18}),gradient:"linear-gradient(90deg, #1db954, #2b8a3e)"},{href:"/spy",label:"Spy Tool",icon:r.jsx(x.Z,{size:18}),gradient:"linear-gradient(90deg, #6aa4ff, #42d392)"},{href:"/editor",label:"Editor",icon:r.jsx(f.Z,{size:18}),gradient:"linear-gradient(90deg, #42d392, #a36bff)"},{href:"/auto-edit-beta",label:"+ Auto Edit Beta",icon:r.jsx(m.Z,{size:18}),gradient:"linear-gradient(90deg, #6aa4ff, #a36bff)"},{href:"/library",label:"Database",icon:r.jsx(y.Z,{size:18}),gradient:"linear-gradient(90deg, #1db954, #6aa4ff)"},{href:"/tasks",label:"Tasks",icon:r.jsx(b.Z,{size:18})},{href:"/auth",label:"Sign in / Up",icon:r.jsx(v.Z,{size:18})},{href:"#",label:"Settings (soon)",icon:r.jsx(w.Z,{size:18}),disabled:!0}];function k(){let e=(0,s.usePathname)();return(0,r.jsxs)("aside",{className:"sidebar",children:[r.jsx("div",{className:"sidebar-header",children:r.jsx("h1",{className:"sidebar-title",children:"Lipsync"})}),r.jsx("nav",{className:"sidebar-nav",children:j.map(a=>{let t=e===a.href,s=!!a.gradient;return(0,r.jsxs)("a",{href:a.href,className:`nav-item ${t?"nav-item-active":""} ${s?"nav-item-gradient":""} ${a.disabled?"nav-item-disabled":""}`,style:s?{background:a.gradient}:void 0,onClick:a.disabled?e=>e.preventDefault():void 0,title:a.label,children:[r.jsx("span",{className:"nav-item-icon",children:a.icon}),r.jsx("span",{className:"nav-item-label",children:a.label})]},a.href)})}),r.jsx("div",{className:"sidebar-footer",children:(0,r.jsxs)("div",{className:"sidebar-copyright",children:["\xa9 ",new Date().getFullYear()," Lipsync"]})})]})}function N({children:e}){return"/"===(0,s.usePathname)()?r.jsx(r.Fragment,{children:e}):(0,r.jsxs)("div",{className:"app-layout",children:[r.jsx(k,{}),(0,r.jsxs)("main",{className:"app-main",children:[r.jsx("div",{className:"app-header",children:(0,r.jsxs)("div",{className:"app-header-content",children:[r.jsx("div",{className:"app-tagline",children:"Build great lipsyncs."}),(0,r.jsxs)("div",{className:"app-user",children:[r.jsx("div",{className:"user-email",id:"user-email"}),r.jsx("div",{className:"user-avatar-small"})]})]})}),r.jsx("div",{className:"app-content",children:e})]})]})}},25472:(e,a,t)=>{"use strict";t.d(a,{_:()=>r});let r=(0,t(47939).eI)("https://ueunqeqrvtuofpdoozye.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVldW5xZXFydnR1b2ZwZG9venllIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxOTM4NjMsImV4cCI6MjA3MTc2OTg2M30.JY5i-uB5vZJ6enhWVgf9Bwg9bK2BFjmuXuOfjbQEQUw",{auth:{persistSession:!0,autoRefreshToken:!0}})},29666:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>n,__esModule:()=>i,default:()=>l});var r=t(68570);let s=(0,r.createProxy)(String.raw`/Users/Aaron/Downloads/next-lipsync-app/app/download/page.tsx`),{__esModule:i,$$typeof:n}=s;s.default;let l=(0,r.createProxy)(String.raw`/Users/Aaron/Downloads/next-lipsync-app/app/download/page.tsx#default`)},98131:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c,metadata:()=>o});var r=t(19510);t(67272);var s=t(68570);let i=(0,s.createProxy)(String.raw`/Users/Aaron/Downloads/next-lipsync-app/components/LayoutWrapper.tsx`),{__esModule:n,$$typeof:l}=i;i.default;let d=(0,s.createProxy)(String.raw`/Users/Aaron/Downloads/next-lipsync-app/components/LayoutWrapper.tsx#LayoutWrapper`),o={title:"Lipsync App",description:"Upload a video + audio and get back a lipsynced video using Sieve",viewport:"width=device-width, initial-scale=1"};function c({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{suppressHydrationWarning:!0,children:r.jsx(d,{children:e})})})}},67272:()=>{},4047:()=>{}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[8948,7893,7939,6226],()=>t(76217));module.exports=r})();
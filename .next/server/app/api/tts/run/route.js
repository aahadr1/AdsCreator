(()=>{var e={};e.id=6152,e.ids=[6152],e.modules={2006:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=2006,e.exports=t},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},43117:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>_,patchFetch:()=>g,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{POST:()=>l});var o=r(49303),s=r(88716),i=r(60670),a=r(9185),u=r.n(a);let p=require("node:buffer");async function l(e){try{let t=await e.json();if(!t||!t.text||"string"!=typeof t.text)return new Response("Missing required field: text",{status:400});let r=t.provider||"replicate";if("elevenlabs"===r){let e=process.env.ELEVENLABS_API_KEY;if(!e)return new Response("Server misconfigured: missing ELEVENLABS_API_KEY",{status:500});let r=t.voice_id||"JBFqnCBsd6RMkjVDRZzb",n=t.model_id||"eleven_multilingual_v2",o=t.output_format||"mp3_44100_128",s=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${r}`,{method:"POST",headers:{"xi-api-key":e,accept:"audio/mpeg","content-type":"application/json"},body:JSON.stringify({text:t.text,model_id:n,output_format:o})});if(!s.ok){let e=await s.text();return new Response(e||"ElevenLabs error",{status:s.status})}let i=s.headers.get("content-type")||"audio/mpeg",a=await s.arrayBuffer(),u=p.Buffer.from(a).toString("base64"),l=`data:${i};base64,${u}`;return Response.json({url:l,contentType:i})}let n=process.env.REPLICATE_API_TOKEN;if(!n)return new Response("Server misconfigured: missing REPLICATE_API_TOKEN",{status:500});let o=new(u())({auth:n}),s={text:t.text};t.voice_id&&(s.voice_id=t.voice_id),"number"==typeof t.speed&&(s.speed=t.speed),"number"==typeof t.pitch&&(s.pitch=t.pitch),"number"==typeof t.volume&&(s.volume=t.volume),t.emotion&&(s.emotion=t.emotion),t.sample_rate&&(s.sample_rate=t.sample_rate),t.bitrate&&(s.bitrate=t.bitrate),t.channel&&(s.channel=t.channel),"boolean"==typeof t.english_normalization&&(s.english_normalization=t.english_normalization),t.language_boost&&(s.language_boost=t.language_boost);let i=await o.run("minimax/speech-02-hd",{input:s}),a=null;if(i&&"object"==typeof i&&"url"in i&&"function"==typeof i.url)try{a=i.url()}catch{}return a||"string"!=typeof i||(a=i),!a&&i&&"string"==typeof i.url&&(a=i.url),Response.json({url:a,raw:i})}catch(e){return new Response(`Error: ${e.message}`,{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/tts/run/route",pathname:"/api/tts/run",filename:"route",bundlePath:"app/api/tts/run/route"},resolvedPagePath:"/Users/Aaron/Downloads/next-lipsync-app/app/api/tts/run/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:f}=c,_="/api/tts/run/route";function g(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},49303:(e,t,r)=>{"use strict";e.exports=r(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[8948,9185],()=>r(43117));module.exports=n})();
"use strict";(()=>{var e={};e.id=1697,e.ids=[1697],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},3444:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>g,patchFetch:()=>I,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>_,staticGenerationAsyncStorage:()=>m});var i={};t.r(i),t.d(i,{POST:()=>u,dynamic:()=>p,runtime:()=>d});var r=t(49303),a=t(88716),n=t(60670),o=t(69498);let d="nodejs",p="force-dynamic";async function u(e){try{let s=process.env.SUPABASE_URL||"https://ueunqeqrvtuofpdoozye.supabase.co",t=process.env.SUPABASE_SERVICE_ROLE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVldW5xZXFydnR1b2ZwZG9venllIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYxOTM4NjMsImV4cCI6MjA3MTc2OTg2M30.JY5i-uB5vZJ6enhWVgf9Bwg9bK2BFjmuXuOfjbQEQUw";if(!s||!t)return new Response("Server misconfigured: missing SUPABASE_URL/SUPABASE_SERVICE_ROLE_KEY",{status:500});let i=await e.json(),r=String(i?.asset_id||"").trim();if(!r)return new Response("Missing asset_id",{status:400});let a=(0,o.eI)(s,t,{auth:{persistSession:!1}}),[{data:n},{data:d},{data:p},{data:u}]=await Promise.all([a.from("media_assets").select("id, type, storage_path, status, public_url, mime_type, created_at").eq("id",r).single(),a.from("media_labels").select("asset_id, label").eq("asset_id",r),a.from("media_descriptions").select("asset_id, description").eq("asset_id",r).single(),a.from("media_analysis").select("asset_id, analysis").eq("asset_id",r).single()]);return Response.json({ok:!0,asset:n||null,labels:d||[],description:p?.description||"",analysis:u?.analysis||null})}catch(s){let e=s instanceof Error?s.message:"Internal error";return new Response(`Error: ${e}`,{status:500})}}let l=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/media/details/route",pathname:"/api/media/details",filename:"route",bundlePath:"app/api/media/details/route"},resolvedPagePath:"/Users/Aaron/Downloads/next-lipsync-app/app/api/media/details/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:_}=l,g="/api/media/details/route";function I(){return(0,n.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:m})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),i=s.X(0,[8948,2659,9498],()=>t(3444));module.exports=i})();
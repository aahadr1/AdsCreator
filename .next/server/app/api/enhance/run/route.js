(()=>{var e={};e.id=5200,e.ids=[5200],e.modules={2006:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=2006,e.exports=t},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},53368:(e,t,n)=>{"use strict";n.r(t),n.d(t,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>d});var r={};n.r(r),n.d(r,{POST:()=>u});var a=n(49303),s=n(88716),o=n(60670),i=n(9185),c=n.n(i);async function u(e){try{let t=await e.json();if(!t||!t.image||"string"!=typeof t.image)return new Response("Missing required field: image",{status:400});let n=process.env.REPLICATE_API_TOKEN;if(!n)return new Response("Server misconfigured: missing REPLICATE_API_TOKEN",{status:500});let r=new(c())({auth:n}),a={image:t.image};"string"==typeof t.enhance_model&&(a.enhance_model=t.enhance_model),"string"==typeof t.upscale_factor&&(a.upscale_factor=t.upscale_factor),"boolean"==typeof t.face_enhancement&&(a.face_enhancement=t.face_enhancement),"string"==typeof t.subject_detection&&(a.subject_detection=t.subject_detection),"number"==typeof t.face_enhancement_creativity&&(a.face_enhancement_creativity=Math.max(0,Math.min(1,t.face_enhancement_creativity)));let s=await r.run("topazlabs/image-upscale",{input:a}),o=null;if(s&&"function"==typeof s.url)try{o=s.url()}catch{}return o||"string"!=typeof s.url||(o=s.url),o||"string"!=typeof s||(o=s),Response.json({url:o,raw:s})}catch(e){return new Response(`Error: ${e.message}`,{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/enhance/run/route",pathname:"/api/enhance/run",filename:"route",bundlePath:"app/api/enhance/run/route"},resolvedPagePath:"/Users/Aaron/Downloads/next-lipsync-app/app/api/enhance/run/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:m}=p,f="/api/enhance/run/route";function h(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:d})}},49303:(e,t,n)=>{"use strict";e.exports=n(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[8948,9185],()=>n(53368));module.exports=r})();
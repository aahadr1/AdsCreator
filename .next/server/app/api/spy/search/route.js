"use strict";(()=>{var e={};e.id=4776,e.ids=[4776],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13531:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>l,patchFetch:()=>m,requestAsyncStorage:()=>p,routeModule:()=>o,serverHooks:()=>u,staticGenerationAsyncStorage:()=>c});var r={};a.r(r),a.d(r,{POST:()=>d});var s=a(49303),i=a(88716),n=a(60670);function _(e){if(e)return Array.isArray(e)?JSON.stringify(e):e}async function d(e){try{let t=process.env.META_ADS_ACCESS_TOKEN||process.env.FACEBOOK_ADS_ACCESS_TOKEN||process.env.META_ACCESS_TOKEN;if(!t)return new Response("Server misconfigured: missing META_ADS_ACCESS_TOKEN",{status:500});let a=await e.json();if(!a)return new Response("Missing body",{status:400});let r=new URLSearchParams,s=a.fields||"ad_creation_time,ad_creative_body,ad_creative_link_caption,ad_creative_link_description,ad_creative_link_title,ad_delivery_start_time,ad_delivery_stop_time,ad_snapshot_url,bylines,currency,demographic_distribution,delivery_by_region,delivery_by_country,funding_entity,impressions,spend,page_id,page_name,publisher_platforms,instagram_actor_name,languages,region_distribution";r.set("fields",s),a.search_terms&&r.set("search_terms",a.search_terms),a.ad_active_status&&r.set("ad_active_status",a.ad_active_status),a.ad_type&&r.set("ad_type",a.ad_type),a.media_type&&r.set("media_type",a.media_type),a.ad_delivery_date_min&&r.set("ad_delivery_date_min",a.ad_delivery_date_min),a.ad_delivery_date_max&&r.set("ad_delivery_date_max",a.ad_delivery_date_max),a.limit&&r.set("limit",String(a.limit)),a.after&&r.set("after",a.after);let i=_(a.ad_reached_countries);i&&r.set("ad_reached_countries",i);let n=_(a.publisher_platforms);n&&r.set("publisher_platforms",n);let d=_(a.page_ids);d&&r.set("page_ids",d);let o=`https://graph.facebook.com/v18.0/ads_archive?${r.toString()}`,p=await fetch(o+`&access_token=${encodeURIComponent(t)}`);if(!p.ok){let e=await p.text();return new Response(e||"Meta Ads API error",{status:p.status})}let c=await p.json();return Response.json(c)}catch(e){return new Response(`Error: ${e.message}`,{status:500})}}let o=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/spy/search/route",pathname:"/api/spy/search",filename:"route",bundlePath:"app/api/spy/search/route"},resolvedPagePath:"/Users/Aaron/Downloads/next-lipsync-app/app/api/spy/search/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:c,serverHooks:u}=o,l="/api/spy/search/route";function m(){return(0,n.patchFetch)({serverHooks:u,staticGenerationAsyncStorage:c})}},49303:(e,t,a)=>{e.exports=a(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948],()=>a(13531));module.exports=r})();